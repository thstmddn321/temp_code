# 공통 설정
spring:
  profiles:
    active: ${SPRING_PROFILE:dev}  # 환경변수로 제어, 기본값 dev
  
  servlet:
    multipart:
      max-file-size: 10MB
      max-request-size: 50MB

# Actuator 설정 (Health Check용)
management:
  endpoints:
    web:
      exposure:
        include: health,info
  endpoint:
    health:
      show-details: when-authorized

# JWT 설정
jwt:
  secret: ${JWT_SECRET:hyupmin-dev-secret-key-change-in-production}
  expiration: 86400000  # 24시간

# 파일 업로드 경로
file:
  dir: ${FILE_UPLOAD_DIR:/tmp/upload/}

---
# 개발 환경 (로컬)
spring:
  config:
    activate:
      on-profile: dev
  
  datasource:
    driver-class-name: org.h2.Driver
    url: jdbc:h2:mem:testdb
    username: sa
    password:
  
  jpa:
    hibernate:
      ddl-auto: update
    show-sql: true
    properties:
      hibernate:
        dialect: org.hibernate.dialect.H2Dialect
        format_sql: true
  
  h2:
    console:
      enabled: true

server:
  port: 8080

---
# 배포 환경 (AWS Elastic Beanstalk)
spring:
  config:
    activate:
      on-profile: prod
  
  datasource:
    driver-class-name: ${DB_DRIVER:org.h2.Driver}
    url: ${DB_URL:jdbc:h2:mem:testdb}
    username: ${DB_USERNAME:sa}
    password: ${DB_PASSWORD:}
  
  jpa:
    hibernate:
      ddl-auto: ${DDL_AUTO:update}
    show-sql: false
    properties:
      hibernate:
        dialect: ${DB_DIALECT:org.hibernate.dialect.H2Dialect}
  
  h2:
    console:
      enabled: false

server:
  port: 5000  # Elastic Beanstalk는 5000 포트 사용